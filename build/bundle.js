var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let u,a;function c(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t){a=t}const g=[],$=[],v=[],b=[],_=Promise.resolve();let y=!1;function w(t){v.push(t)}let j=!1;const k=new Set;function x(){if(!j){j=!0;do{for(let t=0;t<g.length;t+=1){const n=g[t];m(n),C(n.$$)}for(m(null),g.length=0;$.length;)$.pop()();for(let t=0;t<v.length;t+=1){const n=v[t];k.has(n)||(k.add(n),n())}v.length=0}while(g.length);for(;b.length;)b.pop()();y=!1,j=!1,k.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(w)}}const M=new Set;function T(t,n){t&&t.i&&(M.delete(t),t.i(n))}function A(t,n,e,r){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function E(t){t&&t.c()}function O(t,e,i,u){const{fragment:a,on_mount:c,on_destroy:l,after_update:s}=t.$$;a&&a.m(e,i),u||w((()=>{const e=c.map(n).filter(o);l?l.push(...e):r(e),t.$$.on_mount=[]})),s.forEach(w)}function U(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function N(t,n){-1===t.$$.dirty[0]&&(g.push(t),y||(y=!0,_.then(x)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function S(n,o,i,u,c,l,f,d=[-1]){const h=a;m(n);const p=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(h?h.$$.context:[])),callbacks:e(),dirty:d,skip_bound:!1,root:o.target||h.$$.root};f&&f(p.root);let g=!1;if(p.ctx=i?i(n,o.props||{},((t,e,...r)=>{const o=r.length?r[0]:e;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),g&&N(n,t)),e})):[],p.update(),g=!0,r(p.before_update),p.fragment=!!u&&u(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();o.intro&&T(n.$$.fragment),O(n,o.target,o.anchor,o.customElement),x()}m(h)}class F{$destroy(){U(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(n){let e;return{c(){e=f("div"),e.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",p(e,"class","warning svelte-srzfvi")},m(t,n){l(t,e,n)},p:t,i:t,o:t,d(t){t&&s(e)}}}class D extends F{constructor(t){super(),S(this,t,null,q,i,{})}}let L={"quarter of a million":25e4,"half a million":5e5,"three quarters of a million":75e4,"one million":1e6},R={"one in two":.5,"one in three":.333,"one in four":.25,"one in five":.2,"one in six":.167,"one in seven":.143,"one in eight":.125,"one in nine":.111,"1 in 10":.1,"1 in 11":.09,"1 in 12":.083,"1 in 13":.077,"1 in 14":.071,"1 in 15":.067,"1 in 16":.063,"1 in 17":.059,"1 in 18":.056,"1 in 19":.053,"1 in 20":.05,"1 in 30":.033,"1 in 40":.025,"1 in 50":.02,"2 in 10":.2,"3 in 10":.3,"4 in 10":.4,"6 in 10":.6,"7 in 10":.7,"8 in 10":.8,"9 in 10":.9,all:1};function V(t,n){let e;"frac"==n?n=R:"num"==n&&(n=L);let r,o=2e6;for(const i in n)Math.abs(t-n[i])<o&&(o=Math.abs(t-n[i]),r=i,t-n[i]==0?e="about":t-n[i]>0?e="just over":t-n[i]<0&&(e="just under"));return[e,r]}function H(t){let n,e=Number.parseFloat(Number.parseFloat(t).toPrecision(2));return t-e<-t/100&&(n="under "),n=t-e<-t/800?1==Math.round(Math.random())?"almost ":"just under ":t-e>t/100?" just over ":t-e>t/800?"just over ":"about",[n,e]}function I(t,n,e,r){return r="rl"==r?"_rank_local":"r"==r?"_rank":"",n.data[t[e][0]][t[e][1]+r][2011][t[e][3]]}function P(t,n,e,r){return r="rl"==r?"_rank_local":"r"==r?"_rank":"",n.data[t[e][0]][t[e][1]+r].change[t[e][3]]}function Z(t){return Math.ceil(5*t/331)}function z(t,n,e,r,o){"number"==typeof r&r<0?r="highest":"number"==typeof r&&(r="lowest");let i,u=Object.assign({},n.data[t[e][0]][t[e][1]+"_rank_local"][o]),a=new Set(chains[t[e][3]]);for(let t of Object.keys(u))a.has(t)||delete u[t];if(Object.keys(u).length>1){if("lowest"==r){for(let[t,n]of Object.entries(u))n>0&&delete u[t];i=u.length>0?Object.keys(u).reduce(((t,n)=>u[t]>u[n]?t:n)):void 0}if("highest"==r){for(let[t,n]of Object.entries(u))n<0&&delete u[t];i=u.length>0?Object.keys(u).reduce(((t,n)=>u[t]<u[n]?t:n)):void 0}}else i=Object.keys(u);return i}function B(t,n,e,r="r"){let o="";return"rl"==r&&(o="_local"),n.data[t[e][0]][t[e][1]+"_rank"+o].change[z(t,n,e,P(t,n,e,r),"change")]}function J(t,n,e){return t<0?e:n}var K=["","","second-","third-","fourth-","fifth-","sixth-","seventh-","eighth-","ninth-"];function W(t){let n;return console.log("X",t),n=Math.abs(t)<10?K[Math.abs(t)]:function(t){let n;if(12==t)n="twelfth";else if(t>10&t<20)n=t+"th";else{let e=Math.round(t)%10;n=1==e?t+"st":2==e?t+"nd":3==e?t+"rd":t+"th"}return n}(Math.abs(t))+"-",n}var X={},Y={};function G(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Q(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function tt(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function nt(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+tt(-n,6):n>9999?"+"+tt(n,6):tt(n,4))+"-"+tt(t.getUTCMonth()+1,2)+"-"+tt(t.getUTCDate(),2)+(i?"T"+tt(e,2)+":"+tt(r,2)+":"+tt(o,2)+"."+tt(i,3)+"Z":o?"T"+tt(e,2)+":"+tt(r,2)+":"+tt(o,2)+"Z":r||e?"T"+tt(e,2)+":"+tt(r,2)+"Z":"")}var et=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,o=[],i=t.length,u=0,a=0,c=i<=0,l=!1;function s(){if(c)return Y;if(l)return l=!1,X;var n,r,o=u;if(34===t.charCodeAt(o)){for(;u++<i&&34!==t.charCodeAt(u)||34===t.charCodeAt(++u););return(n=u)>=i?c=!0:10===(r=t.charCodeAt(u++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(u)&&++u),t.slice(o+1,n-1).replace(/""/g,'"')}for(;u<i;){if(10===(r=t.charCodeAt(n=u++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(u)&&++u;else if(r!==e)continue;return t.slice(o,n)}return c=!0,t.slice(o,i)}for(10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i;(r=s())!==Y;){for(var f=[];r!==X&&r!==Y;)f.push(r),r=s();n&&null==(f=n(f,a++))||o.push(f)}return o}function o(n,e){return n.map((function(n){return e.map((function(t){return u(n[t])})).join(t)}))}function i(n){return n.map(u).join(t)}function u(t){return null==t?"":t instanceof Date?nt(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,o,i=r(t,(function(t,r){if(e)return e(t,r-1);o=t,e=n?function(t,n){var e=G(t);return function(r,o){return n(e(r),o,t)}}(t,n):G(t)}));return i.columns=o||[],i},parseRows:r,format:function(n,e){return null==e&&(e=Q(n)),[e.map(u).join(t)].concat(o(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=Q(t)),o(t,n).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:u}}(","),rt=et.parse;function ot(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function it(t,n){return fetch(t,n).then(ot)}var ut,at=(ut=rt,function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=void 0),it(t,n).then((function(t){return ut(t,e)}))});function ct(t){let n,e=t[0]&&lt(t);return{c(){e&&e.c(),n=d("")},m(t,r){e&&e.m(t,r),l(t,n,r)},p(t,r){t[0]?e?e.p(t,r):(e=lt(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&s(n)}}}function lt(t){let n,e=t[4](t[0],t[2])+"";return{c(){n=f("main"),p(n,"class","svelte-15qyx5z")},m(t,r){l(t,n,r),n.innerHTML=e},p(t,r){1&r&&e!==(e=t[4](t[0],t[2])+"")&&(n.innerHTML=e)},d(t){t&&s(n)}}}function st(n){let e,r,o,i,a,d,m,g,$=n[1]&&ct(n);return{c(){var t,n,c,l,s;e=f("script"),o=h(),i=f("div"),a=f("div"),d=h(),$&&$.c(),t=e.src,n=r="./rosaenlg_tiny_en_US_3.2.2_comp.js",u||(u=document.createElement("a")),u.href=n,t!==u.href&&p(e,"src","./rosaenlg_tiny_en_US_3.2.2_comp.js"),c="height",l="50px",a.style.setProperty(c,l,s?"important":"")},m(t,r){var u,s,f,h;c(document.head,e),l(t,o,r),l(t,i,r),c(i,a),c(i,d),$&&$.m(i,null),m||(u=e,s="load",f=n[3],u.addEventListener(s,f,h),g=()=>u.removeEventListener(s,f,h),m=!0)},p(t,[n]){t[1]?$?$.p(t,n):($=ct(t),$.c(),$.m(i,null)):$&&($.d(1),$=null)},i:t,o:t,d(t){s(e),t&&s(o),t&&s(i),$&&$.d(),m=!1,g()}}}function ft(t,n,e){let r={};at("./data.csv").then((t=>{t.forEach((t=>{e(0,r[t.Variable]={},r),e(0,r[t.Variable][0]=parseFloat(t[0].replace("%","").replace(",","")),r),e(0,r[t.Variable][1]=parseFloat(t[1].replace("%","").replace(",","")),r)}))}));let o={};var i;at("./meta.csv").then((t=>{t.forEach((t=>{e(5,o[t.issue]=t.info,o)}))})),fetch("./template.pug").then((t=>t.text())).then((t=>i=t));let u=!1;let a={word1:"In the week to 2 June 2022",word2:"tested positive for COVID-19",word3:"the week",word4:"testing positive"};return t.$$.update=()=>{1&t.$$.dirty&&console.log(r),32&t.$$.dirty&&console.log(o)},[r,u,undefined,()=>{e(1,u=!0)},function(t,n){return rosaenlg_en_US.render(i,{language:"en_UK",data:r,meta:o,get_word:V,figs:H,otherEst:z,cur:I,cha:P,qui:Z,otherRank:B,ud:J,ord:W,wordob:a})},o]}class dt extends F{constructor(t){super(),S(this,t,ft,st,i,{})}}function ht(n){let e,r,o,i;return e=new D({}),o=new dt({}),{c(){E(e.$$.fragment),r=h(),E(o.$$.fragment)},m(t,n){O(e,t,n),l(t,r,n),O(o,t,n),i=!0},p:t,i(t){i||(T(e.$$.fragment,t),T(o.$$.fragment,t),i=!0)},o(t){A(e.$$.fragment,t),A(o.$$.fragment,t),i=!1},d(t){U(e,t),t&&s(r),U(o,t)}}}return new class extends F{constructor(t){super(),S(this,t,null,ht,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
